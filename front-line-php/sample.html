<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Object Oriented Done Right - Front Line PHP</title>
    <meta name="description" content="Object Oriented Done Right — Building modern applications with PHP 8">
    <link rel="canonical" href="https://front-line-php.com/object-oriented" />
    <style lang="css">
        * {
            position: relative
        }

        html {
            box-sizing: border-box;
            font-size: 13px;
            scroll-behavior: smooth
        }

        @media (min-width: 640px) {
            html {
                font-size: 14px
            }
        }

        @media (min-width: 768px) {
            html {
                font-size: 15px
            }
        }

        @media (min-width: 1024px) {
            html {
                font-size: 16px
            }
        }

        @media (min-width: 1280px) {
            html {
                font-size: 18px
            }
        }

        .markup h1 {
            margin-bottom: 3rem
        }

        .markup h2 {
            margin-top: 4rem;
            margin-bottom: 1rem
        }

        .markup h2:first-child {
            margin-top: 0
        }

        .markup h3 {
            margin-top: 2rem;
            margin-bottom: 1rem
        }

        .markup h3:first-child {
            margin-top: 0
        }

        .markup p {
            line-height: 1.625
        }

        .markup ol,
        .markup p,
        .markup ul {
            margin-bottom: 2rem
        }

        .markup p+ul {
            margin-top: -1.5rem
        }

        .markup li ul {
            margin-bottom: 0
        }

        .markup blockquote {
            margin: 1rem 0;
            padding: 1rem 1.5rem;
            border-left-width: 4px
        }

        .markup-h1,
        .markup h1 {
            font-weight: 700;
            font-size: 2.25rem;
            line-height: 1.25
        }

        .markup-h1,
        .markup-h2,
        .markup h1,
        .markup h2 {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
            text-transform: uppercase;
        }

        .markup-h2,
        .markup h2 {
            font-weight: 600;
            font-size: 1.5rem
        }

        .markup-h3,
        .markup h3 {
            font-weight: 700;
            font-size: 1.125rem
        }

        .markup-baseline {
            opacity: .7;
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: .25rem
        }

        .markup strong {
            font-weight: 600
        }

        .markup hr {
            margin-top: 8rem;
            margin-bottom: 8rem;
            margin-right: 16rem
        }

        .markup-lists ul>li,
        .markup-ul-alt>li,
        .markup-ul>li {
            padding-left: 1.15em
        }

        .markup-lists ul>li:before,
        .markup-ul>li:before {
            content: "\2022";
            position: absolute;
            left: 0
        }

        .markup-ol {
            counter-reset: customOl
        }

        .markup-lists ol>li,
        .markup-ol>li {
            counter-increment: customOl;
            padding-left: 1.5em
        }

        .markup-lists ol>li:before {
            position: absolute;
            left: 0;
            content: counter(customOl) "."
        }

        .markup-lists ol>li:before,
        .markup-ol>li:before {
            position: absolute;
            left: 0;
            content: counter(customOl);
            border-radius: 9999px;
            flex: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            --text-opacity: 1;
            color: #2c1b1d;
            color: rgba(44, 27, 29, var(--text-opacity));
            --bg-opacity: 1;
            background-color: #f0de38;
            background-color: rgba(240, 222, 56, var(--bg-opacity));
            --bg-opacity: 0.5;
            font-size: .65em;
            width: 1.5em;
            height: 1.5em;
            transform: translateY(.35em)
        }

        .markup-lists-spaced ol,
        .markup-lists-spaced ul {
            display: grid;
            grid-gap: .25rem;
            gap: .25rem
        }

        .markup-link,
        .markup-links a {
            background-image: linear-gradient(0deg, #f0de38 0, #f0de38 4px, transparent 5px, transparent);
            background-position: 0 0;
            background-repeat: no-repeat;
            transition: background-position .3s ease
        }

        .markup-link:hover,
        .markup-links a:hover {
            background-position: 1em 0
        }

        .markup-links .markup-anchor {
            background-image: none;
            --text-opacity: 1;
            color: #0756b0;
            color: rgba(7, 86, 176, var(--text-opacity));
            opacity: 0;
            font-family: Staatliches, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
            position: absolute;
            right: 100%;
            margin-right: .25rem;
            font-size: 1rem
        }

        .markup-links [id]:hover>h2>.markup-anchor,
        .markup-links [id]:hover>h3>.markup-anchor {
            opacity: .5
        }

        .markup-code code {
            font-family: JetBrains Mono, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
            background-color: rgba(0, 0, 0, .025)
        }

        .markup-code pre code {
            background: transparent
        }

        .markup-code pre {
            font-family: JetBrains Mono, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
            margin-top: 2rem;
            margin-bottom: 2rem;
            padding: 1rem;
            overflow-x: auto;
            --bg-opacity: 1;
            background-color: #fff;
            background-color: rgba(255, 255, 255, var(--bg-opacity));
            font-size: .8em;
            line-height: 1.8;
            background-color: rgba(0, 0, 0, .025)
        }

        .markup-code pre::-webkit-scrollbar {
            height: 1px;
            width: 1px
        }

        .markup-code pre::-webkit-scrollbar-track {
            background: transparent
        }

        .markup-code pre::-webkit-scrollbar-thumb {
            background-image: none;
            --bg-opacity: 1;
            background-color: #4530a8;
            background-color: rgba(69, 48, 168, var(--bg-opacity));
            --bg-opacity: 0.25
        }

        .markup img {
            border-width: 4px;
            --border-opacity: 1;
            border-color: #fff;
            border-color: rgba(255, 255, 255, var(--border-opacity));
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .1), 0 1px 2px 0 rgba(0, 0, 0, .06)
        }

        .markup-code :not(pre)>code {
            border-radius: .125rem;
            font-size: .85em;
            padding: .25rem
        }

        .markup-code .hljs {
            overflow-x: initial
        }

        .markup-table table {
            border-collapse: collapse;
            border-top-width: 1px;
            border-bottom-width: 1px;
            width: 100%;
            font-size: .875rem;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem
        }

        .markup-table table thead tr {
            border-bottom-width: 1px;
            font-size: .875em
        }

        .markup-table table td,
        .markup-table table th {
            padding: .5rem .25rem
        }

        @media (min-width: 640px) {

            .markup-table table td,
            .markup-table table th {
                padding-left: .5rem;
                padding-right: .5rem
            }
        }

        .markup-table table th {
            text-align: left;
            font-weight: 400;
            white-space: nowrap;
            letter-spacing: .05em;
            text-transform: uppercase;
            font-size: .75rem
        }

        .markup-table table tbody tr {
            border-top-width: 1px
        }

        .markup-table table tbody .td-numeric,
        .markup-table table thead .th-numeric {
            text-align: right;
            font-variant-numeric: tabular-nums
        }

        .hljs {
            display: block;
            overflow-x: auto
        }

        .hljs-comment,
        .hljs-quote {
            color: #888;
            font-style: italic
        }

        .hljs-highlight.keyword,
        .hljs-keyword,
        .hljs-meta,
        .hljs-selector-tag,
        .hljs-subst {
            --text-opacity: 1;
            color: #4530a8;
            color: rgba(69, 48, 168, var(--text-opacity));
            background: 0 0
        }

        .hljs-highlight.numeric,
        .hljs-number {
            color: #222;
            background: 0 0
        }

        .hljs-literal,
        .hljs-tag .hljs-attr,
        .hljs-template-variable,
        .hljs-variable {
            --text-opacity: 1;
            color: #ab190f;
            color: rgba(171, 25, 15, var(--text-opacity))
        }

        .hljs-doctag,
        .hljs-string {
            color: #222
        }

        .hljs-highlight.prop,
        .hljs-highlight.property,
        .hljs-section,
        .hljs-selector-id,
        .hljs-title {
            --text-opacity: 1;
            color: #639517;
            color: rgba(99, 149, 23, var(--text-opacity));
            background: 0 0
        }

        .hljs-subst {
            font-weight: 400
        }

        .hljs-class .hljs-title,
        .hljs-highlight.type,
        .hljs-highlight.type .hljs-title,
        .hljs-highlight.type span,
        .hljs-params+.hljs-title,
        .hljs-type {
            --text-opacity: 1;
            color: #ab190f;
            color: rgba(171, 25, 15, var(--text-opacity));
            background: 0 0
        }

        .hljs-attribute,
        .hljs-name,
        .hljs-tag {
            color: #222;
            font-weight: 400
        }

        .hljs-link,
        .hljs-regexp {
            --text-opacity: 1;
            color: #639517;
            color: rgba(99, 149, 23, var(--text-opacity))
        }

        .hljs-bullet,
        .hljs-symbol {
            --text-opacity: 1;
            color: #0756b0;
            color: rgba(7, 86, 176, var(--text-opacity))
        }

        .hljs-built_in,
        .hljs-builtin-name {
            --text-opacity: 1;
            color: #ab190f;
            color: rgba(171, 25, 15, var(--text-opacity))
        }

        .hljs-deletion {
            background: #fdd
        }

        .hljs-addition {
            background: #dfd
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-highlight {
            display: inline
        }

        .hljs-highlight.comment {
            background: 0 0;
            color: #888;
            font-style: italic
        }

        .hljs-highlight.error {
            background-image: linear-gradient(90deg, rgba(204, 52, 42, .2), rgba(204, 52, 42, 0) calc(100vw - 2rem))
        }

        .hljs-highlight.text,
        .hljs-highlight.text span {
            color: #353535;
            background: 0 0
        }

        .hljs-highlight.yellow {
            background-image: linear-gradient(90deg, rgba(240, 222, 56, .3333333333333333), rgba(240, 222, 56, 0) calc(100vw - 2rem))
        }

        .hljs-highlight.green {
            --bg-opacity: 1;
            background-color: #abcf73;
            background-color: rgba(171, 207, 115, var(--bg-opacity));
            --bg-opacity: 0.25
        }

        .hljs-highlight.full,
        .hljs-highlight.line {
            display: block;
            margin-left: -1.5rem;
            margin-right: -1.5rem;
            padding-left: 1.5rem;
            padding-right: 1.5rem
        }

        /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */

        html {
            line-height: 1.15;
            -webkit-text-size-adjust: 100%
        }

        body {
            margin: 0
        }

        main {
            display: block
        }

        h1 {
            font-size: 2em;
            margin: .67em 0
        }

        hr {
            box-sizing: content-box;
            height: 0;
            overflow: visible
        }

        pre {
            font-family: monospace, monospace;
            font-size: 1em
        }

        a {
            background-color: transparent
        }

        b,
        strong {
            font-weight: bolder
        }

        code {
            font-family: monospace, monospace;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline;
            top: -.5em
        }

        img {
            border-style: none
        }

        button,
        input {
            font-family: inherit;
            font-size: 100%;
            line-height: 1.15;
            margin: 0;
            overflow: visible
        }

        button {
            text-transform: none
        }

        [type=button],
        [type=reset],
        [type=submit],
        button {
            -webkit-appearance: button
        }

        [type=button]::-moz-focus-inner,
        [type=reset]::-moz-focus-inner,
        [type=submit]::-moz-focus-inner,
        button::-moz-focus-inner {
            border-style: none;
            padding: 0
        }

        [type=button]:-moz-focusring,
        [type=reset]:-moz-focusring,
        [type=submit]:-moz-focusring,
        button:-moz-focusring {
            outline: 1px dotted ButtonText
        }

        [type=checkbox],
        [type=radio] {
            box-sizing: border-box;
            padding: 0
        }

        [type=number]::-webkit-inner-spin-button,
        [type=number]::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        [type=search]::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        details {
            display: block
        }

        summary {
            display: list-item
        }

        [hidden],
        template {
            display: none
        }

        blockquote,
        dl,
        figure,
        h1,
        h2,
        h3,
        hr,
        p,
        pre {
            margin: 0
        }

        button {
            background-color: transparent;
            background-image: none
        }

        button:focus {
            outline: 1px dotted;
            outline: 5px auto -webkit-focus-ring-color
        }

        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        html {
            font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
            line-height: 1.5
        }

        *,
        :after,
        :before {
            box-sizing: border-box;
            border: 0 solid #d1cec9
        }

        hr {
            border-top-width: 1px
        }

        img {
            border-style: solid
        }

        input::-moz-placeholder {
            color: #a0aec0
        }

        input:-ms-input-placeholder {
            color: #a0aec0
        }

        input::placeholder {
            color: #a0aec0
        }

        [role=button],
        button {
            cursor: pointer
        }

        h1,
        h2,
        h3 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        button,
        input {
            padding: 0;
            line-height: inherit;
            color: inherit
        }

        code,
        pre {
            font-family: JetBrains Mono, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace
        }

        iframe,
        img,
        object,
        svg {
            display: block;
            vertical-align: middle
        }

        img {
            max-width: 100%;
            height: auto
        }

        .space-y-1> :not(template)~ :not(template) {
            --space-y-reverse: 0 !important;
            margin-top: calc(0.25rem *(1 - var(--space-y-reverse))) !important;
            margin-bottom: calc(0.25rem * var(--space-y-reverse)) !important
        }

        .space-y-2> :not(template)~ :not(template) {
            --space-y-reverse: 0 !important;
            margin-top: calc(0.5rem *(1 - var(--space-y-reverse))) !important;
            margin-bottom: calc(0.5rem * var(--space-y-reverse)) !important
        }

        .space-y-6> :not(template)~ :not(template) {
            --space-y-reverse: 0 !important;
            margin-top: calc(1.5rem *(1 - var(--space-y-reverse))) !important;
            margin-bottom: calc(1.5rem * var(--space-y-reverse)) !important
        }

        .space-x-8> :not(template)~ :not(template) {
            --space-x-reverse: 0 !important;
            margin-right: calc(2rem * var(--space-x-reverse)) !important;
            margin-left: calc(2rem *(1 - var(--space-x-reverse))) !important
        }

        .bg-white {
            background-color: #fff !important;
            background-color: rgba(255, 255, 255, var(--bg-opacity)) !important
        }

        .bg-black,
        .bg-white {
            --bg-opacity: 1 !important
        }

        .bg-black {
            background-color: #2c1b1d !important;
            background-color: rgba(44, 27, 29, var(--bg-opacity)) !important
        }

        .bg-yellow-500 {
            --bg-opacity: 1 !important;
            background-color: #f0de38 !important;
            background-color: rgba(240, 222, 56, var(--bg-opacity)) !important
        }

        .bg-purple-500 {
            --bg-opacity: 1 !important;
            background-color: #47286f !important;
            background-color: rgba(71, 40, 111, var(--bg-opacity)) !important
        }

        .bg-blue-200 {
            --bg-opacity: 1 !important;
            background-color: #daf1f5 !important;
            background-color: rgba(218, 241, 245, var(--bg-opacity)) !important
        }

        .bg-blue-300 {
            --bg-opacity: 1 !important;
            background-color: #c1e2e8 !important;
            background-color: rgba(193, 226, 232, var(--bg-opacity)) !important
        }

        .bg-gray-100 {
            --bg-opacity: 1 !important;
            background-color: #f8f7f6 !important;
            background-color: rgba(248, 247, 246, var(--bg-opacity)) !important
        }

        .bg-green-500 {
            --bg-opacity: 1 !important;
            background-color: #75ad20 !important;
            background-color: rgba(117, 173, 32, var(--bg-opacity)) !important
        }

        .target\:bg-yellow-100:target {
            --bg-opacity: 1 !important;
            background-color: #fcf8e7 !important;
            background-color: rgba(252, 248, 231, var(--bg-opacity)) !important
        }

        .bg-none {
            background-image: none !important
        }

        .bg-opacity-20 {
            --bg-opacity: 0.2 !important
        }

        .bg-opacity-25 {
            --bg-opacity: 0.25 !important
        }

        .bg-opacity-50 {
            --bg-opacity: 0.5 !important
        }

        .border-white {
            border-color: #fff !important;
            border-color: rgba(255, 255, 255, var(--border-opacity)) !important
        }

        .border-black,
        .border-white {
            --border-opacity: 1 !important
        }

        .border-black {
            border-color: #2c1b1d !important;
            border-color: rgba(44, 27, 29, var(--border-opacity)) !important
        }

        .hover\:border-blue-300:hover {
            --border-opacity: 1 !important;
            border-color: #c1e2e8 !important;
            border-color: rgba(193, 226, 232, var(--border-opacity)) !important
        }

        .border-opacity-50 {
            --border-opacity: 0.5 !important
        }

        .rounded-full {
            border-radius: 9999px !important
        }

        .border-2 {
            border-width: 2px !important
        }

        .border-l-2 {
            border-left-width: 2px !important
        }

        .border-l-4 {
            border-left-width: 4px !important
        }

        .border-b {
            border-bottom-width: 1px !important
        }

        .border-l {
            border-left-width: 1px !important
        }

        .block {
            display: block !important
        }

        .inline-block {
            display: inline-block !important
        }

        .flex {
            display: flex !important
        }

        .inline-flex {
            display: inline-flex !important
        }

        .grid {
            display: grid !important
        }

        .contents {
            display: contents !important
        }

        .hidden {
            display: none !important
        }

        .flex-col {
            flex-direction: column !important
        }

        .items-start {
            align-items: flex-start !important
        }

        .items-end {
            align-items: flex-end !important
        }

        .items-center {
            align-items: center !important
        }

        .items-baseline {
            align-items: baseline !important
        }

        .justify-start {
            justify-content: flex-start !important
        }

        .justify-end {
            justify-content: flex-end !important
        }

        .justify-center {
            justify-content: center !important
        }

        .justify-between {
            justify-content: space-between !important
        }

        .flex-none {
            flex: none !important
        }

        .flex-grow {
            flex-grow: 1 !important
        }

        .font-sans {
            font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji !important
        }

        .font-display {
            font-family: Staatliches, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji !important
        }

        .font-normal {
            font-weight: 400 !important
        }

        .font-medium {
            font-weight: 500 !important
        }

        .font-semibold {
            font-weight: 600 !important
        }

        .font-bold {
            font-weight: 700 !important
        }

        .h-6 {
            height: 1.5rem !important
        }

        .h-8 {
            height: 2rem !important
        }

        .h-12 {
            height: 3rem !important
        }

        .h-16 {
            height: 4rem !important
        }

        .h-32 {
            height: 8rem !important
        }

        .h-64 {
            height: 16rem !important
        }

        .h-full {
            height: 100% !important
        }

        .text-xs {
            font-size: .75rem !important
        }

        .text-sm {
            font-size: .875rem !important
        }

        .text-base {
            font-size: 1rem !important
        }

        .text-lg {
            font-size: 1.125rem !important
        }

        .text-xl {
            font-size: 1.25rem !important
        }

        .text-2xl {
            font-size: 1.5rem !important
        }

        .text-3xl {
            font-size: 1.875rem !important
        }

        .text-4xl {
            font-size: 2.25rem !important
        }

        .text-5xl {
            font-size: 3rem !important
        }

        .text-6xl {
            font-size: 4rem !important
        }

        .leading-none {
            line-height: 1 !important
        }

        .leading-tight {
            line-height: 1.25 !important
        }

        .leading-snug {
            line-height: 1.375 !important
        }

        .leading-relaxed {
            line-height: 1.625 !important
        }

        .list-decimal {
            list-style-type: decimal !important
        }

        .m-6 {
            margin: 1.5rem !important
        }

        .my-1 {
            margin-top: .25rem !important;
            margin-bottom: .25rem !important
        }

        .mx-auto {
            margin-left: auto !important;
            margin-right: auto !important
        }

        .-my-4 {
            margin-top: -1rem !important;
            margin-bottom: -1rem !important
        }

        .mt-2 {
            margin-top: .5rem !important
        }

        .mr-3 {
            margin-right: .75rem !important
        }

        .mt-4 {
            margin-top: 1rem !important
        }

        .mr-4 {
            margin-right: 1rem !important
        }

        .ml-4 {
            margin-left: 1rem !important
        }

        .mt-6 {
            margin-top: 1.5rem !important
        }

        .mb-6 {
            margin-bottom: 1.5rem !important
        }

        .mt-8 {
            margin-top: 2rem !important
        }

        .mb-8 {
            margin-bottom: 2rem !important
        }

        .mt-12 {
            margin-top: 3rem !important
        }

        .mt-16 {
            margin-top: 4rem !important
        }

        .mt-24 {
            margin-top: 6rem !important
        }

        .mb-24 {
            margin-bottom: 6rem !important
        }

        .-mt-3 {
            margin-top: -.75rem !important
        }

        .-mb-3 {
            margin-bottom: -.75rem !important
        }

        .-ml-3 {
            margin-left: -.75rem !important
        }

        .-mb-4 {
            margin-bottom: -1rem !important
        }

        .-mt-5 {
            margin-top: -1.25rem !important
        }

        .-mt-6 {
            margin-top: -1.5rem !important
        }

        .-mb-8 {
            margin-bottom: -2rem !important
        }

        .-mt-16 {
            margin-top: -4rem !important
        }

        .-mt-px {
            margin-top: -1px !important
        }

        .max-w-xl {
            max-width: 36rem !important
        }

        .max-w-4xl {
            max-width: 56rem !important
        }

        .max-w-5xl {
            max-width: 64rem !important
        }

        .max-w-article {
            max-width: calc(66ch + 8rem) !important
        }

        .object-cover {
            -o-object-fit: cover !important;
            object-fit: cover !important
        }

        .opacity-20 {
            opacity: .2 !important
        }

        .opacity-25 {
            opacity: .25 !important
        }

        .opacity-50 {
            opacity: .5 !important
        }

        .opacity-75 {
            opacity: .75 !important
        }

        .opacity-100 {
            opacity: 1 !important
        }

        .hover\:opacity-50:hover {
            opacity: .5 !important
        }

        .group:hover .group-hover\:opacity-75,
        .hover\:opacity-75:hover {
            opacity: .75 !important
        }

        .overflow-hidden {
            overflow: hidden !important
        }

        .overflow-x-hidden {
            overflow-x: hidden !important
        }

        .p-4 {
            padding: 1rem !important
        }

        .p-6 {
            padding: 1.5rem !important
        }

        .p-8 {
            padding: 2rem !important
        }

        .py-1 {
            padding-top: .25rem !important;
            padding-bottom: .25rem !important
        }

        .px-1 {
            padding-left: .25rem !important;
            padding-right: .25rem !important
        }

        .py-2 {
            padding-top: .5rem !important;
            padding-bottom: .5rem !important
        }

        .px-2 {
            padding-left: .5rem !important;
            padding-right: .5rem !important
        }

        .px-3 {
            padding-left: .75rem !important;
            padding-right: .75rem !important
        }

        .py-4 {
            padding-top: 1rem !important;
            padding-bottom: 1rem !important
        }

        .px-4 {
            padding-left: 1rem !important;
            padding-right: 1rem !important
        }

        .px-6 {
            padding-left: 1.5rem !important;
            padding-right: 1.5rem !important
        }

        .py-8 {
            padding-top: 2rem !important;
            padding-bottom: 2rem !important
        }

        .px-8 {
            padding-left: 2rem !important;
            padding-right: 2rem !important
        }

        .py-12 {
            padding-top: 3rem !important;
            padding-bottom: 3rem !important
        }

        .px-12 {
            padding-left: 3rem !important;
            padding-right: 3rem !important
        }

        .py-16 {
            padding-top: 4rem !important;
            padding-bottom: 4rem !important
        }

        .pt-2 {
            padding-top: .5rem !important
        }

        .pl-2 {
            padding-left: .5rem !important
        }

        .pt-4 {
            padding-top: 1rem !important
        }

        .pt-6 {
            padding-top: 1.5rem !important
        }

        .pb-6 {
            padding-bottom: 1.5rem !important
        }

        .pb-8 {
            padding-bottom: 2rem !important
        }

        .pb-10 {
            padding-bottom: 2.5rem !important
        }

        .pt-12 {
            padding-top: 3rem !important
        }

        .pb-12 {
            padding-bottom: 3rem !important
        }

        .pl-12 {
            padding-left: 3rem !important
        }

        .pb-16 {
            padding-bottom: 4rem !important
        }

        .pb-24 {
            padding-bottom: 6rem !important
        }

        .pt-32 {
            padding-top: 8rem !important
        }

        .static {
            position: static !important
        }

        .fixed {
            position: fixed !important
        }

        .absolute {
            position: absolute !important
        }

        .sticky {
            position: -webkit-sticky !important;
            position: sticky !important
        }

        .inset-0 {
            right: 0 !important;
            bottom: 0 !important;
            left: 0 !important
        }

        .inset-0,
        .top-0 {
            top: 0 !important
        }

        .right-0 {
            right: 0 !important
        }

        .bottom-0 {
            bottom: 0 !important
        }

        .left-0 {
            left: 0 !important
        }

        .right-full {
            right: 100% !important
        }

        .shadow {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .1), 0 1px 2px 0 rgba(0, 0, 0, .06) !important
        }

        .shadow-md {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06) !important
        }

        .shadow-xl {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, .1), 0 10px 10px -5px rgba(0, 0, 0, .04) !important
        }

        .shadow-2xl {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, .25) !important
        }

        .target\:shadow-xl:target {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, .1), 0 10px 10px -5px rgba(0, 0, 0, .04) !important
        }

        .fill-current {
            fill: currentColor !important
        }

        .text-center {
            text-align: center !important
        }

        .text-white {
            color: #fff !important;
            color: rgba(255, 255, 255, var(--text-opacity)) !important
        }

        .text-black,
        .text-white {
            --text-opacity: 1 !important
        }

        .text-black {
            color: #2c1b1d !important;
            color: rgba(44, 27, 29, var(--text-opacity)) !important
        }

        .text-spatie {
            --text-opacity: 1 !important;
            color: #197593 !important;
            color: rgba(25, 117, 147, var(--text-opacity)) !important
        }

        .text-yellow-500 {
            --text-opacity: 1 !important;
            color: #f0de38 !important;
            color: rgba(240, 222, 56, var(--text-opacity)) !important
        }

        .text-blue-500 {
            --text-opacity: 1 !important;
            color: #0756b0 !important;
            color: rgba(7, 86, 176, var(--text-opacity)) !important
        }

        .text-gray-500 {
            --text-opacity: 1 !important;
            color: #898784 !important;
            color: rgba(137, 135, 132, var(--text-opacity)) !important
        }

        .text-gray-600 {
            --text-opacity: 1 !important;
            color: #6b6966 !important;
            color: rgba(107, 105, 102, var(--text-opacity)) !important
        }

        .text-gray-700 {
            --text-opacity: 1 !important;
            color: #4f4e4c !important;
            color: rgba(79, 78, 76, var(--text-opacity)) !important
        }

        .text-opacity-75 {
            --text-opacity: 0.75 !important
        }

        .text-opacity-90 {
            --text-opacity: 0.9 !important
        }

        .italic {
            font-style: italic !important
        }

        .uppercase {
            text-transform: uppercase !important
        }

        .underline {
            text-decoration: underline !important
        }

        .line-through {
            text-decoration: line-through !important
        }

        .tracking-wider {
            letter-spacing: .05em !important
        }

        .whitespace-no-wrap {
            white-space: nowrap !important
        }

        .w-1 {
            width: .25rem !important
        }

        .w-2 {
            width: .5rem !important
        }

        .w-16 {
            width: 4rem !important
        }

        .w-64 {
            width: 16rem !important
        }

        .w-auto {
            width: auto !important
        }

        .w-full {
            width: 100% !important
        }

        .z-10 {
            z-index: 10 !important
        }

        .z-50 {
            z-index: 50 !important
        }

        .gap-2 {
            grid-gap: .5rem !important;
            gap: .5rem !important
        }

        .gap-6 {
            grid-gap: 1.5rem !important;
            gap: 1.5rem !important
        }

        .gap-8 {
            grid-gap: 2rem !important;
            gap: 2rem !important
        }

        .gap-12 {
            grid-gap: 3rem !important;
            gap: 3rem !important
        }

        .row-span-2 {
            grid-row: span 2/span 2 !important
        }

        .transform {
            --transform-translate-x: 0 !important;
            --transform-translate-y: 0 !important;
            --transform-rotate: 0 !important;
            --transform-skew-x: 0 !important;
            --transform-skew-y: 0 !important;
            --transform-scale-x: 1 !important;
            --transform-scale-y: 1 !important;
            transform: translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y)) !important
        }

        .rotate-0 {
            --transform-rotate: 0 !important
        }

        .transition-opacity {
            transition-property: opacity !important
        }

        .duration-200 {
            transition-duration: .2s !important
        }

        .duration-300 {
            transition-duration: .3s !important
        }

        @-webkit-keyframes spin {
            to {
                transform: rotate(1turn)
            }
        }

        @keyframes spin {
            to {
                transform: rotate(1turn)
            }
        }

        @keyframes ping {

            75%,
            to {
                transform: scale(2);
                opacity: 0
            }
        }

        @keyframes pulse {
            50% {
                opacity: .5
            }
        }

        @keyframes bounce {

            0%,
            to {
                transform: translateY(-25%);
                -webkit-animation-timing-function: cubic-bezier(.8, 0, 1, 1);
                animation-timing-function: cubic-bezier(.8, 0, 1, 1)
            }

            50% {
                transform: none;
                -webkit-animation-timing-function: cubic-bezier(0, 0, .2, 1);
                animation-timing-function: cubic-bezier(0, 0, .2, 1)
            }
        }

        button {
            transition: transform .2s ease;
            transform-origin: 0 50%
        }

        button:hover {
            transform: scaleX(1.03)
        }

        button:active {
            transform: scaleX(1.06)
        }

        .input {
            height: 3rem;
            --text-opacity: 1;
            color: #47286f;
            color: rgba(71, 40, 111, var(--text-opacity));
            background-image: linear-gradient(90deg, #fff 20%, #daf1f5)
        }

        .input:focus {
            background-image: none;
            outline: 2px solid transparent;
            outline-offset: 2px;
            --bg-opacity: 1;
            background-color: #fcf8e7;
            background-color: rgba(252, 248, 231, var(--bg-opacity))
        }

        .input::-moz-placeholder {
            -moz-transition: transform .5s ease, opacity .5s ease;
            transition: transform .5s ease, opacity .5s ease
        }

        .input:-ms-input-placeholder {
            -ms-transition: transform .5s ease, opacity .5s ease;
            transition: transform .5s ease, opacity .5s ease
        }

        .input::placeholder {
            transition: transform .5s ease, opacity .5s ease
        }

        .input:focus::-moz-placeholder {
            transform: translateX(25%);
            opacity: 0
        }

        .input:focus:-ms-input-placeholder {
            transform: translateX(25%);
            opacity: 0
        }

        .input:focus::placeholder {
            transform: translateX(25%);
            opacity: 0
        }

        .moving-button {
            transition: transform .2s ease;
            transform-origin: 0 50%
        }

        .moving-button .button {
            transition: background .2s ease, color .2s ease, transform .2s ease
        }

        .input:invalid+.moving-button,
        .input:invalid+.moving-button .button {
            transition-delay: 1s
        }

        .input:valid+.moving-button .button {
            --bg-opacity: 1;
            background-color: #f0de38;
            background-color: rgba(240, 222, 56, var(--bg-opacity));
            --text-opacity: 1;
            color: #2c1b1d;
            color: rgba(44, 27, 29, var(--text-opacity))
        }

        @media (min-width: 768px) {
            .moving-button {
                position: absolute;
                right: 0;
                top: 0
            }

            .input:valid+.moving-button {
                transform: translateX(100%)
            }
        }

        .button {
            transition: transform .2s ease;
            transform-origin: 0 50%;
            height: 3rem;
            display: inline-flex;
            align-items: center;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            font-family: Staatliches, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
            font-size: 1.25rem;
            --text-opacity: 1;
            color: #fff;
            color: rgba(255, 255, 255, var(--text-opacity));
            --text-opacity: 0.9;
            --bg-opacity: 1;
            background-color: #47286f;
            background-color: rgba(71, 40, 111, var(--bg-opacity))
        }

        .marker {
            display: inline-block
        }

        .marker,
        :target>.marker-target {
            margin-left: -.25rem;
            margin-right: -.25rem;
            padding-left: .25rem;
            padding-right: .25rem;
            background-image: linear-gradient(90deg, #f0de38, rgba(240, 222, 56, .2) 80%)
        }

        :target>.marker-target {
            display: block
        }

        @keyframes glow-1 {
            0% {
                opacity: 0;
                transform: translateX(-20px)
            }

            20% {
                opacity: .07
            }

            50% {
                opacity: .12;
                transform: translateX(-3px)
            }

            70% {
                opacity: 0;
                transform: scaleX(2.5) translateX(3px)
            }

            to {
                opacity: 0
            }
        }

        @keyframes glow-2 {
            0% {
                opacity: 0;
                transform: scaleX(3.5) translateX(-15px)
            }

            24% {
                opacity: .08
            }

            45% {
                opacity: .13;
                transform: scaleX(2.2) translateX(-6px)
            }

            70% {
                opacity: 0;
                transform: scaleX(.75) translateX(5px)
            }

            to {
                opacity: 0
            }
        }

        .line-1 {
            -webkit-animation: glow-1 6s ease-in-out .3s infinite both;
            animation: glow-1 6s ease-in-out .3s infinite both;
            background-image: linear-gradient(270deg, transparent, rgba(0, 0, 0, .25) 30%, rgba(0, 0, 0, .25) 70%, transparent)
        }

        .line-2 {
            -webkit-animation: glow-2 7s ease-in-out 2.5s infinite both;
            animation: glow-2 7s ease-in-out 2.5s infinite both;
            background-image: linear-gradient(270deg, transparent, rgba(0, 0, 0, .5) 30%, rgba(0, 0, 0, .25) 70%, transparent)
        }

        .line-3 {
            -webkit-animation: glow-1 5s ease-in-out 4.5s infinite both;
            animation: glow-1 5s ease-in-out 4.5s infinite both;
            background-image: linear-gradient(270deg, transparent, rgba(0, 0, 0, .75) 30%, rgba(0, 0, 0, .75) 70%, transparent)
        }

        .line-4 {
            -webkit-animation: glow-2 7.5s ease-in-out 2.1s infinite both;
            animation: glow-2 7.5s ease-in-out 2.1s infinite both;
            background-image: linear-gradient(270deg, transparent, rgba(0, 0, 0, .25) 30%, rgba(0, 0, 0, .25) 70%, transparent)
        }

        .line-5 {
            -webkit-animation: glow-1 6.9s ease-in-out .75s infinite both;
            animation: glow-1 6.9s ease-in-out .75s infinite both;
            background-image: linear-gradient(270deg, transparent, rgba(0, 0, 0, .75) 30%, rgba(0, 0, 0, .75) 70%, transparent)
        }

        .line-6 {
            -webkit-animation: glow-2 8.5s ease-in-out 5s infinite both;
            animation: glow-2 8.5s ease-in-out 5s infinite both;
            background-image: linear-gradient(270deg, transparent, rgba(0, 0, 0, .5) 30%, rgba(0, 0, 0, .5) 70%, transparent)
        }

        ::-webkit-scrollbar {
            width: 4px
        }

        ::-webkit-scrollbar-track {
            background: #d8eff3
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #d8eff3 0, #4530a8)
        }

        @media (min-width: 640px) {
            .sm\:text-4xl {
                font-size: 2.25rem !important
            }

            .sm\:text-5xl {
                font-size: 3rem !important
            }

            .sm\:ml-16 {
                margin-left: 4rem !important
            }

            .sm\:px-16 {
                padding-left: 4rem !important;
                padding-right: 4rem !important
            }
        }

        @media (min-width: 768px) {
            .md\:text-base {
                font-size: 1rem !important
            }

            .md\:text-xl {
                font-size: 1.25rem !important
            }

            .md\:text-2xl {
                font-size: 1.5rem !important
            }

            .md\:text-3xl {
                font-size: 1.875rem !important
            }

            .md\:text-5xl {
                font-size: 3rem !important
            }

            .md\:text-6xl {
                font-size: 4rem !important
            }

            .md\:ml-8 {
                margin-left: 2rem !important
            }

            .md\:-mt-16 {
                margin-top: -4rem !important
            }

            .md\:-mt-24 {
                margin-top: -6rem !important
            }

            .md\:p-12 {
                padding: 3rem !important
            }

            .md\:px-12 {
                padding-left: 3rem !important;
                padding-right: 3rem !important
            }

            .md\:px-16 {
                padding-left: 4rem !important;
                padding-right: 4rem !important
            }

            .md\:pr-12 {
                padding-right: 3rem !important
            }

            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important
            }

            .md\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr)) !important
            }
        }

        @media (min-width: 1024px) {
            .lg\:space-x-16> :not(template)~ :not(template) {
                --space-x-reverse: 0 !important;
                margin-right: calc(4rem * var(--space-x-reverse)) !important;
                margin-left: calc(4rem *(1 - var(--space-x-reverse))) !important
            }

            .lg\:flex {
                display: flex !important
            }

            .lg\:text-4xl {
                font-size: 2.25rem !important
            }

            .lg\:text-7xl {
                font-size: 6rem !important
            }

            .lg\:-mt-24 {
                margin-top: -6rem !important
            }

            .lg\:p-16 {
                padding: 4rem !important
            }

            .lg\:px-8 {
                padding-left: 2rem !important;
                padding-right: 2rem !important
            }

            .lg\:px-24 {
                padding-left: 6rem !important;
                padding-right: 6rem !important
            }

            .lg\:pt-24 {
                padding-top: 6rem !important
            }

            .lg\:w-auto {
                width: auto !important
            }

            .lg\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important
            }

            .lg\:col-span-2 {
                grid-column: span 2/span 2 !important
            }

            .lg\:row-span-2 {
                grid-row: span 2/span 2 !important
            }

            .lg\:row-span-3 {
                grid-row: span 3/span 3 !important
            }
        }

        @media (min-width: 1280px) {
            .xl\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr)) !important
            }
        }
    </style>
</head>

<body class="overflow-x-hidden font-sans text-black">
    <header>
        <div class="mx-auto max-w-article px-4 sm:px-16 py-16">
            <h1 class="font-display text-4xl sm:text-5xl md:text-6xl leading-none">
                Object Oriented Done Right </h1>
            <p>
            </p>
        </div>
    </header>
    <aside class="mx-auto max-w-article sm:px-16 mb-8">
        <div style="background-image: linear-gradient(to right, #b0070fad 0%, #a83040 80%)" class="z-10 -mb-4 text-white px-6 py-4 text-sm">
            <b>Bài dịch phục vụ cho chiến dịch mua sách.</b>
            <br><a style="text-decoration: underline;" href="https://front-line-php.com/object-oriented">Link bài viết gốc</a>
        </div>
    </aside>
    <aside class="mx-auto max-w-article sm:px-16">
        <div style="background-image: linear-gradient(to right, #0756b0 0%, #4530a8 80%)" class="z-10 -mb-4 text-white px-6 py-4 text-sm">
            Đây là một đoạn trích trong cuốn sách <a href="https://front-line-php.com/"><strong class="font-semibold hover:opacity-75">Front Line PHP</strong></a>.
            <br>Cuốn sách nói về những tính năng mới của PHP8, các xu hướng phát triển, các nguyên lý thiết kế để xây dựng một phần mềm hiện đại, kèm theo video hướng dẫn và các minh hoạ cụ thể.
            <br>Code trong bài được viết bằng PHP và chạy ở phiên bản 8 nên có chỗ sử dụng cấu trúc, hàm và toán tử mới, người dịch sẽ để nguyên.
        </div>
    </aside>
    <div class="mx-auto max-w-article sm:px-16">
    </div>

    <main class="mx-auto max-w-article px-4 sm:px-16" style="background-image: linear-gradient(to bottom, #daf1f566, #fff 50vh )">
        <article class="py-16 markup markup-links markup-lists markup-code markup-tables">

            <div class="text-lg">
                <p>Alan Kay, người phát triển định nghĩa “lập trình hướng đối tượng”, đã kể câu chuyện này trong một buổi nói chuyện 20 năm về trước. Bạn có thể xây nguyên một cái chuồng chó chỉ với một cây búa, ít đinh, vài tấm ván gỗ và chút kỹ năng nghề mộc. Tôi nhận thấy đến tôi cũng có thể xây được nếu có đủ thời gian. Khi hoàn thành dự án chuồng chó này, bạn thêm được vài kỹ năng và kiến thức xây nhà (cho chó) và có thể áp dụng cho mọi dự án nhà khác. Dự án tiếp theo, bạn muốn xây hẳn một toà lâu đài, vẫn chỉ với một cây búa, ít đinh, vài tấm ván gỗ. Kể cả nó có to gấp 100 lần đi, thì bạn cũng đã từng làm rồi mà, đúng không? Nó sẽ chỉ mất thời gian hơn thôi.</p>

                <p>Khi quy mô dự án của bạn to lên 100 lần, thể tích của nó to lên gấp 1.000.000 lần nhưng kết cấu chịu lực của nó chỉ to lên có 10.000 lần mà thôi. Sự mất cân đối khi phóng đại chắc chắn sẽ làm cái nhà bạn xây sập xuống. Một vài người sẽ đổ xi măng lên đống xà bần, biến nó thành một cái kim tự tháp và nói rằng đấy là kế hoạch từ đầu của họ; nhưng tôi với bạn đều biết chuyện gì đã thực sự xảy ra.</p>

                <p>Alan sử dụng ẩn dụ này để nói về vấn đề cốt lõi của “OOP hiện đại” mà ông đã thấy 20 năm trước. Tôi nghĩ là điều đó vẫn tồn tại cho đến tận bây giờ: chúng ta tận dụng giải pháp của một vấn đề — OO code — nhân nó lên gấp 100 lần, và hy vọng nó vẫn làm việc y như cũ. Ngày nay, chúng ta không nghĩ về kiến trúc hay thiết kế — một thứ khá là quan trọng nếu bạn thực sự muốn xây một lâu đài — mà chúng ta sử dụng luôn các giải pháp OO chúng ta được học mà không thay đổi nó. Phần lớn chúng ta học về OO qua các case-study nhỏ và chẳng liên quan gì với nhau, và càng không liên quan đến việc áp dụng nó vào một dự án. Trong thực tế, chúng ta không thể áp dụng máy móc các patterns về OO chúng ta được học và hy vọng mọi thứ hoạt động một cách đơn giản và dễ dàng như với Animals, Cats, và Dogs.</p>

                <p class='text-sm'>Chú thích người dịch: Animals, Cats, và Dogs là một ví dụ kinh điển về OO, trongg đó Animals là lớp cha, Cats và Dogs là lớp con extends từ lớp Animals có các thuộc tính chung của lớp Animals nhưng vẫn mang các thuộc tính riêng biệt.</p>
                <p>Việc sử dụng OOP máy móc và thiếu định hướng như vậy khiến cho nhiều người lên tiếng phản đối OO mấy năm gần đây. Cá nhân tôi nghĩ OOP vẫn là một công cụ rất tốt — so với functional programing (dạo gần dây mọi người hay so sánh nó với OOP) — <em><b>nếu</b></em> được sử dụng đúng cách.</p>
                <p>Bài học tôi rút ra từ câu chuyện của Alan là mỗi object là một chương trình riêng biệt, với các giá trị nội bộ riêng biệt. Object giao tiếp với nhau bằng cách gửi đi các gói tin — tập hợp các dữ liệu không đổi (imutable data) — mà các object khác có thể hứng nhận và xử lý. Tất nhiên là bạn không thể code toàn bộ dự án bằng cách này, và điều đó hoàn toàn bình thường — chúng ta không nên và cũng không cần ép buộc mình phải áp dụng máy móc bất cứ thứ gì mình đọc được trong sách hoặc tìm trên mạng.
                    Dù vậy, tôi cũng đã nhận được những dấu hiệu tích cực khi áp dụng suy nghĩ này vào việc lập trình OO. Với tư tưởng mỗi object là một chương trình độc lập, tôi bắt đầu viết code với một cách hoàn toàn khác. Tôi hy vọng rằng từ bây giờ khi bắt đầu sử dụng OOP, bạn hãy nghĩ đến câu chuyện của Alan. Đừng áp dụng một cách máy móc các quy tắc và khuôn mẫu. Hãy nhìn vào bức tranh tổng thể của cái mà bạn đang xây dựng.</p>
                <h2 id="the-pitfall-of-inheritance"><a href="#the-pitfall-of-inheritance" class="markup-anchor">#</a> Cạm bẫy của sự kế thừa</h2>
                <p>Ban đầu tôi thấy rất khó tin, vì class và kế thừa không liên quan gì đến OOP như cách Alan mô tả nó. Không có nghĩa hai thứ đó là xấu, nhưng <em>sẽ tốt hơn</em> nếu chúng ta hiểu hơn về mục đích cũng như cách sử dụng lớp và kế thừa một cách tốt nhất có thể.
                    Tư tưởng của Alan chỉ mô tả về object  — và không hề đề cập đến cách mà object được tạo ra. Class được tạo ra sau đó như một cách để quản lý object dễ dàng hơn, nhưng class chỉ là một phần, một công cụ để sử dụng, chứ không phải là tư tưởng chủ đạo của OOP. Sau class chúng ta có kế thừa, một công cụ mạnh mẽ nếu sử dụng đúng cách. Nhưng sự thật thì không như thế: vấn đề Alan đặt ra 20 năm trước vẫn tồn tại đến tận ngày nay.</p>
                <p>Một trong những ưu điểm của OOP mà mọi người hay bảo nhau đó là nó biểu diễn bằng code cách mà con người nhìn thế giới. Nhưng trong thực tế, chúng ta ít khi nhìn vấn đề bằng sự trừu tượng hoá và sự kế thừa. Thay vì sử dụng kế thừa một cách đúng đắn, chúng ta đang sử dụng nó như một phương án để chia sẻ các đoạn code dùng chung, và tạo ra các object mới bằng một cách rất kỳ cục.
                    Tôi sẽ chỉ cho bạn một ví dụ về vấn đề này, hãy cùng xem nhé:</p>
                <p>Có một bài vè trẻ em tên là “The House That Jack Built”.
                    Nó bắt đầu như thế này:</p>
                <pre><code class="language- hljs ">This is the house that Jack built.</code></pre>
                <p>Mỗi một lần lặp sẽ có một câu mới được thêm vào:</p>
                <pre><code class="language- hljs ">This is the malt that lay in
        the house that Jack built.</code></pre>
                <p>Tiếp theo:</p>
                <pre><code class="language- hljs ">This is the rat that ate
        the malt that lay in
        the house that Jack built.</code></pre>
                <p>Hiểu chứ? Toàn bộ bài vè sẽ như vậy:</p>
                <pre><code class="language- hljs ">This is the horse and the hound and the horn that belonged to
        the farmer sowing his corn that kept
        the rooster that crowed in the morn that woke
        the priest all shaven and shorn that married
        the man all tattered and torn that kissed
        the maiden all forlorn that milked
        the cow with the crumpled horn that tossed
        the dog that worried
        the cat that killed
        the rat that ate
        the malt that lay in
        the house that Jack built.</code></pre>
                <p>Hãy lập trình nó nhé. Chúng ta sẽ sử dụng PHP. Giả sử có một khách hàng yêu cầu chúng ta tạo ra một chương trình với điều kiện đầu vào là số câu và đầu ra sẽ là bài vè được cắt ở đúng số câu đó. Hãy làm nó bằng OO cho ngầu. Chúng ta sẽ bắt đầu bằng cách gom hết toàn bộ câu vào trong một mảng trong class; hãy đặt tên class đó là <code><span class="hljs-highlight  type">PoemGenerator</span></code> — nghe khá OO, nhỉ? Tốt.</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">array</span> <span class="hljs-highlight  prop">$data</span> = [
        <span class="hljs-string">'the horse and the hound and the horn that belonged to'</span>,
        <span class="hljs-string">'the farmer sowing his corn that kept'</span>,
        <span class="hljs-string">'the rooster that crowed in the morn that woke'</span>,
        <span class="hljs-string">'the priest all shaven and shorn that married'</span>,
        <span class="hljs-string">'the man all tattered and torn that kissed'</span>,
        <span class="hljs-string">'the maiden all forlorn that milked'</span>,
        <span class="hljs-string">'the cow with the crumpled horn that tossed'</span>,
        <span class="hljs-string">'the dog that worried'</span>,
        <span class="hljs-string">'the cat that killed'</span>,
        <span class="hljs-string">'the rat that ate'</span>,
        <span class="hljs-string">'the malt that lay in'</span>,
        <span class="hljs-string">'the house that Jack built'</span>,
    ];
}</code></pre>
                <p>Ô kê, tiếp theo thêm vào hai method <code><span class="hljs-highlight  prop">generate</span></code> và <code><span class="hljs-highlight  prop">phrase</span></code>. <code><span class="hljs-highlight  prop">generate</span></code> sẽ xuất ra kết quả cuối cùng, và <code><span class="hljs-highlight  prop">phrase</span></code> là hàm nội tại để gắn các câu vào theo số lượng đã yêu cầu.</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-comment">// …</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate</span><span class="hljs-params">(<span class="hljs-highlight  type">int</span> $number)</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"This is {$this-&gt;<span class="hljs-highlight  prop">phrase</span>($number)}."</span>;
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">phrase</span><span class="hljs-params">(<span class="hljs-highlight  type">int</span> $number)</span>: <span class="hljs-title">string</span>
    </span>{
        $parts = <span class="hljs-highlight  prop">array_slice</span>(<span class="hljs-keyword">self</span>::<span class="hljs-highlight  prop">$data</span>, -$number, $number);

        <span class="hljs-keyword">return</span> <span class="hljs-highlight  prop">implode</span>(<span class="hljs-string">"\n        "</span>, $parts);
    }
}</code></pre>
                <p>Có vẻ khá bảnh rồi đấy: chúng ta sẽ dùng <code><span class="hljs-highlight  prop">phrase</span></code> để lấy x câu trong mảng dữ liệu câu và gom nó thành 1 câu kết quả; sau đó dùng <code><span class="hljs-highlight  prop">generate</span></code> để bọc kết quả đó giữa <code>This is</code> và dấu <code>.</code>. Đừng để ý cái đoạn khoảng cách nhé, cái đấy để format cho đẹp thôi.</p>
                <pre><code class="language-php hljs php">$generator = <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">PoemGenerator</span>();

$generator-&gt;<span class="hljs-highlight  prop">generate</span>(<span class="hljs-number">4</span>);

<span class="hljs-comment">// This is the cat that killed</span>
<span class="hljs-comment">//         the rat that ate</span>
<span class="hljs-comment">//         the malt that lay in</span>
<span class="hljs-comment">//         the house that Jack built.</span></code></pre>
                <p>Đúng yêu cầu của khách luôn nhé. Deploy rồi release thôi.</p>
                <hr>
                <p>Làm gì có chuyện dễ thế… đã là khách thì phải biết request. Giờ khách muốn thêm chức năng <em>ngẫu nhiên</em>: các câu xuất hiện một cách ngẫu nhiên không theo quy luật nào. Vậy giờ có cách nào để xử lý yêu cầu này mà không cần phải clone object cũ và tránh lặp code mà lại còn nhàn? Kế thừa thôi — đúng không?
                    Nào, bây giờ ta sẽ refactor cái class cũ một tí, hãy thêm một hàm <code><span class="hljs-highlight  prop">data</span></code>, để chúng ta kiểm soát dữ liệu class trả về dễ dàng hơn:</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">phrase</span><span class="hljs-params">(<span class="hljs-highlight  type">int</span> $number)</span>: <span class="hljs-title">string</span>
    </span>{
        $parts = <span class="hljs-highlight  prop">array_slice</span>(<span class="hljs-highlight  yellow"><span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">data</span>()</span>, -$number, $number);

        <span class="hljs-keyword">return</span> <span class="hljs-highlight  prop">implode</span>(<span class="hljs-string">"\n        "</span>, $parts);
    }

<span class="hljs-highlight  yellow full">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">data</span><span class="hljs-params">()</span>: <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'the horse and the hound and the horn that belonged to'</span>,
            <span class="hljs-comment">// …</span>
            <span class="hljs-string">'the house that Jack built'</span>,
        ];
    }</span>}</code></pre>
                <p>Tiếp theo chúng ta tạo một cái class mới tên là <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code> và viết đè luôn hàm <code><span class="hljs-highlight  prop">data</span></code>: </p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RandomPoemGenerator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">data</span><span class="hljs-params">()</span>: <span class="hljs-title">array</span>
    </span>{
        $data = <span class="hljs-keyword">parent</span>::<span class="hljs-highlight  prop">data</span>();

        <span class="hljs-highlight  prop">shuffle</span>($data);

        <span class="hljs-keyword">return</span> $data;
    }
}</code></pre>
                <p>Kế thừa thật toẹt vời! Chỉ cần viết lại một phần của class mới và chúng ta đã đáp ứng ngay yêu cầu của khách!</p>
                <pre><code class="language-php hljs php">$generator = <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">RandomPoemGenerator</span>();

$generator-&gt;<span class="hljs-highlight  prop">generate</span>(<span class="hljs-number">4</span>);</code></pre>
                <pre><code class="language- hljs ">This is the priest all shaven and shorn that married
        the cow with the crumpled horn that tossed
        the man all tattered and torn that kissed
        the rooster that crowed in the morn that woke.</code></pre>
                <p>Ngon!</p>
                <hr>
                <p>Và tất nhiên… đã có request lần 1 thì sẽ có lần 2: lặp câu: mỗi một dòng sẽ được lặp lại 2 lần. Ví dụ như vầy:</p>
                <pre><code class="language-php hljs php">This is the malt that lay in the malt that lay in
        the house that Jack built the house that Jack built.</code></pre>
                <p>Làm bằng cách nào; lại kế thừa thôi, đúng không?</p>
                <p>Một lần nữa hãy refactor lại class <code><span class="hljs-highlight  type">PoemGenerator</span></code>. Mục đích? Clean code chứ còn gì nữa! Hãy tách phần cắt dòng từ mảng câu trong hàm <code><span class="hljs-highlight  prop">phrase</span></code> ra một hàm riêng, bởi vì chúng ta được dạy là <a href="https://toidicodedao.com/2020/11/18/separation-of-concerns-chia-de-tri-phan-phac-qui-chan/#more-2376"><strong class="font-semibold hover:opacity-75">SoC</strong></a> là chân ái!</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-comment">// …</span>

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">phrase</span><span class="hljs-params">(int $number)</span>: <span class="hljs-title">string</span>
    </span>{
        $parts = <span class="hljs-highlight  yellow"><span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">parts</span>($number)</span>;

        <span class="hljs-keyword">return</span> <span class="hljs-highlight  prop">implode</span>(<span class="hljs-string">"\n        "</span>, $parts);
    }

<span class="hljs-highlight  yellow full">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-highlight  prop"><span class="hljs-title">parts</span></span><span class="hljs-params">(int $number)</span>: <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-highlight  prop">array_slice</span>(<span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">data</span>(), -$number, $number);
    }</span>}</code></pre>
                <p>Sau khi đã refactor ngon nghẻ rồi, việc tạo class mới <code><span class="hljs-highlight  type">EchoPoemGenerator</span></code> trở nên rất là dễ:</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EchoPoemGenerator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parts</span><span class="hljs-params">(<span class="hljs-highlight  type">int</span> $number)</span>: <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-highlight  prop">array_reduce</span>(
            <span class="hljs-keyword">parent</span>::<span class="hljs-highlight  prop">parts</span>($number),
            <span class="hljs-highlight  keyword">fn</span> (<span class="hljs-highlight  type"><span class="hljs-keyword">array</span></span> $output, <span class="hljs-highlight  type">string</span> $line) =&gt; [...$output, <span class="hljs-string">"{$line} {$line}"</span>],
            []
        );
    }
}</code></pre>
                <p>Hãy dừng lại một lúc và cản thán về sức mạnh của kế thừa đi nào. Chúng ta đã tạo ra 2 class mới đáp ứng 2 request của khách từ class <code><span class="hljs-highlight  type">PoemGenerator</span></code>, mà <em>chỉ cần</em> viết đè một phần rất nhỏ trong class <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code> và <code><span class="hljs-highlight  type">EchoPoemGenerator</span></code>. Chúng ta còn dùng cả clean code cả SOLID các thứ các thứ nữa. Đây là điểm mạnh của OOP — đúng không? Tắt máy đi về thôi.</p>
                <hr>
                <p>Đời chẳng bao giờ như mơ… khách luôn làm ta bất ngờ: ô kê, anata làm giúp watashi một cái yêu cầu nhỏ nữa nhé, kết hợp cả 2 chức năng lặp và ngẫu nhiên ở trên vào làm một luôn đi. Tèn ten: <code><span class="hljs-highlight  type">RandomEchoPoemGenerator</span></code>.</p>
                <p>Giờ sao? Class nào kế thừa class nào đây?</p>
                <p>Nếu ta kế thừa từ class<code><span class="hljs-highlight  type">PoemGenerator</span></code>, chúng ta sẽ phải viết lại hai hàm <code><span class="hljs-highlight  prop">data</span></code> và <code><span class="hljs-highlight  prop">parts</span></code>, copy đúng y hệt code từ class <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code> và <code><span class="hljs-highlight  type">EchoPoemGenerator</span></code>. Không ổn rồi. Lặp code rồi.
                    Nếu ta tạo class mới kế thừa class <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code>? Lúc đó phải copy hàm <code><span class="hljs-highlight  prop">parts</span></code> từ class <code><span class="hljs-highlight  type">EchoPoemGenerator</span></code>. Nếu bắt đầu từ class <code><span class="hljs-highlight  type">EchoPoemGenerator</span></code> thì cũng phải làm điều tương tự.</p>
                <p>Nếu xem xét lại, tạo class mới kế thừa class <code><span class="hljs-highlight  type">PoemGenerator</span></code> và copy từ 2 class còn lại có vẻ là lựa chọn ổn nhất tầm này, ít ra thì mấy ông dev mới khi đọc lại code cũng sẽ biết là cái class này hoàn toàn là một class độc lập thuộc về một yêu cầu độc lập.</p>
                <p>Chấp nhận đi, mặc kệ ta làm theo cách nào thì nó cũng như c… ơm nguội hết. Bạn đã dính phải cái bẫy có tên là kế thừa. Và bạn ơi, điều này xảy ra <em>cực kỳ</em> thường xuyên ở các dự án: chúng ta nghĩ đến kế thừa như một giải pháp hoàn hảo cho mọi thứ, từ clean code, refactor, sử dụng lại code và làm công việc của chúng ta dễ dàng hơn rất nhiều, và nó luôn có vẻ rất ổn lúc đầu. Và khi các yêu cầu ngày càng trở nên phức tạp, các chức năng chồng chéo lẫn nhau, cũng là lúc mọi thứ vượt quá tầm kiểm soát. Bạn nghĩ mình ở tầng 3 nhưng hoá ra vẫn đang giậm chân ở tầng 1.</p>
                <p>Vấn đề ở đây là gì? Có hợp lý không khi <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code> kế thừa <code><span class="hljs-highlight  type">PoemGenerator</span></code>? <em>Nó là</em> một cách tạo bài vè, đúng không? Đó chính là cách mà chúng ta nghĩ về kế thừa: sử dụng "<em>nó là</em>". Và đúng, <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code> <em>là</em> một <code><span class="hljs-highlight  type">PoemGenerator</span></code>, nhưng <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code> không <em>chỉ riêng</em> tạo ra bài vè nữa, đúng không?</p>
                <p>Sandi Metz gợi ý sử dụng câu hỏi sau để phân tách vấn đề: "cái gì đã thay đổi khi so sánh 2 object — cái gì đã thay đổi khi kế thừa?". Trong trường hợp <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code>, đó là hàm <code><span class="hljs-highlight  prop">data</span></code>; còn ở trong <code><span class="hljs-highlight  type">EchoPoemGenerator</span></code>, đó      là hàm <code><span class="hljs-highlight  prop">parts</span></code>. Và trong đúng trường hợp khi chúng ta cần kết hợp 2 sự thay đổi đó thì chúng ta thất bại.</p>
                <p>Vậy điều này nghĩa là gì? Nghĩa là <code><span class="hljs-highlight  prop">parts</span></code> và <code><span class="hljs-highlight  prop">data</span></code> không đơn giản chỉ là hàm trong class, chúng còn có ý nghĩa<em> nhiều</em>  hơn thế, chúng là bussiness logic, chúng là vấn đề mà ta cần giải quyết, chúng là <em>bản chất</em> của thứ chúng ta đang xây dựng.</p>
                <p>Hãy đối xử với hàm của chúng ta một cách trân trọng hơn nữa nào.</p>
                <p>Khi đã tìm và phân tách được các vấn đề rồi, chúng ta cần đặt tên cho bọn nó.
                    Vấn đề đầu tiên là liệu các câu có bị xáo trộn vị trí hay không. Hãy gọi nó là  <code><span class="hljs-highlight  type">Orderer</span></code>, công việc của nó là nhận một mảng gồm các câu, sau đó trả về mảng mới đã được sắp xếp theo yêu cầu.</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Orderer</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">order</span><span class="hljs-params">(<span class="hljs-highlight  type">array</span> $data)</span>: <span class="hljs-title">array</span></span>;
}</code></pre>
                <p>Vấn đề thứ hai là định dạng câu, xem câu có bị lặp hoặc không. Hãy gọi nó là <code><span class="hljs-highlight  type">Formatter</span></code>, công việc của nó sẽ là nhận một mảng gồm các câu, và định dạng mảng đó thành 1 câu duy nhất theo yêu cầu.</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Formatter</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span><span class="hljs-params">(<span class="hljs-highlight  type">array</span> $lines)</span>: <span class="hljs-title">string</span></span>;
}</code></pre>
                <p>Đến đoạn magic rồi này. Chúng ta tách code <em>từ</em> class <code><span class="hljs-highlight  type">PoemGenerator</span></code>, nhưng vẫn cần có cách để truy cập nó từ bên trong class. Vậy hãy <em>truyền (inject)</em> cả hai phần định dạng và sắp xếp vào <code><span class="hljs-highlight  type">PoemGenerator</span></code>:</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        <span class="hljs-highlight  keyword">public</span> <span class="hljs-highlight  type">Formatter</span> $formatter,
        <span class="hljs-highlight  keyword">public</span> <span class="hljs-highlight  type">Orderer</span> $orderer,
    )</span> </span>{}

    <span class="hljs-comment">// …</span>
}</code></pre>
                <p>Sau đó, chúng ta cần refactor lại class để gọi đến các dịch vụ (service) tương ứng trong <code><span class="hljs-highlight  prop">phrase</span></code> và <code><span class="hljs-highlight  prop">data</span></code>:</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-comment">// …</span>

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">phrase</span><span class="hljs-params">(int $number)</span>: <span class="hljs-title">string</span>
    </span>{
        $parts = <span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">parts</span>($number);

        <span class="hljs-keyword">return</span> <span class="hljs-highlight  yellow"><span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">formatter</span>-&gt;<span class="hljs-highlight  prop">format</span></span>($parts);
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">data</span><span class="hljs-params">()</span>: <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-highlight  yellow"><span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">orderer</span>-&gt;<span class="hljs-highlight  prop">order</span></span>([
            <span class="hljs-string">'the horse and the hound and the horn that belonged to'</span>,
            <span class="hljs-comment">// …</span>
            <span class="hljs-string">'the house that Jack built'</span>,
        ]);
    }
}</code></pre>
                <p>Cuối cùng, chúng ta mở rộng các class con của <code><span class="hljs-highlight  type">Orderer</span></code> bằng bussiness logic tương ứng:</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SequentialOrderer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Orderer</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">order</span><span class="hljs-params">(<span class="hljs-highlight  type">array</span> $data)</span>: <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> $data;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RandomOrderer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Orderer</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">order</span><span class="hljs-params">(<span class="hljs-highlight  type">array</span> $data)</span>: <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-highlight  prop">shuffle</span>($data);

        <span class="hljs-keyword">return</span> $data;
    }
}</code></pre>
                <p>Làm tương tự với <code><span class="hljs-highlight  type">Formatter</span></code>:</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DefaultFormatter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Formatter</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span><span class="hljs-params">(<span class="hljs-highlight  type">array</span> $lines)</span>: <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-highlight  prop">implode</span>(<span class="hljs-string">"\n        "</span>, $lines);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EchoFormatter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Formatter</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format</span><span class="hljs-params">(<span class="hljs-highlight  type">array</span> $lines)</span>: <span class="hljs-title">string</span>
    </span>{
        $lines = <span class="hljs-highlight  prop">array_reduce</span>(
            $lines,
            <span class="hljs-highlight  keyword">fn</span> (<span class="hljs-highlight  type"><span class="hljs-keyword">array</span></span> $output, <span class="hljs-highlight  type">string</span> $line) =&gt; [...$output, <span class="hljs-string">"{$line} {$line}"</span>],
            []
        );

        <span class="hljs-keyword">return</span> <span class="hljs-highlight  prop">implode</span>(<span class="hljs-string">"\n        "</span>, $lines);
    }
}</code></pre>
                <p>Hai class <code><span class="hljs-highlight  type">DefaultFormatter</span></code> and <code><span class="hljs-highlight  type">SequentialOrderer</span></code> trông có vẻ không làm gì cả, tuy vậy chúng vẫn giải quyết 2 vấn đề hợp lệ: "sắp xếp mặc định" và "định dạng mặc định" là 2 trong số các điều kiện chúng ta cần xét đến khi tạo ra bài vè.</p>
                <p>Bạn có thấy điều gì vừa xảy ra không? Bạn có thể nghĩ là tôi đang bôi ra quá nhiều dòng code không cần thiết nhưng mà có thể bạn dã quên một điều… chúng ta không cần đến hai class <code><span class="hljs-highlight  type">RandomPoemGenerator</span></code> và <code><span class="hljs-highlight  type">EchoPoemGenerator</span></code> nữa, chúng ta có thể giải quyết mọi vấn đề của khách hàng, chỉ bằng một class <code><span class="hljs-highlight  type">PoemGenerator</span></code> duy nhất:</p>
                <pre><code class="language-php hljs php">$generator = <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">PoemGenerator</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">EchoFormatter</span>(),
    <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">RandomOrderer</span>(),
);</code></pre>
                <p>Chúng ta có thể khiến code gọn hơn bằng cách gán các class con của chúng ta những giá trị mặc định:</p>
                <pre><code class="language-php hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoemGenerator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(
        <span class="hljs-highlight  keyword">public</span> <span class="hljs-highlight  type">?Formatter</span> $formatter = null,
        <span class="hljs-highlight  keyword">public</span> <span class="hljs-highlight  type">?Orderer</span> $orderer = null,
    )</span> </span>{
        <span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">formatter</span> ??= <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">DefaultFormatter</span>();
        <span class="hljs-keyword">$this</span>-&gt;<span class="hljs-highlight  prop">orderer</span> ??= <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">SequentialOrderer</span>();
    }
}</code></pre>
                <p>Và bằng cách dùng biến tên <em>(một tính năng mới của PHP 8)</em>, chúng ta có thể xây dựng class <code><span class="hljs-highlight  type">PoemGenerator</span></code> bằng mọi cách mà chúng ta muốn:</p>
                <pre><code class="language-php hljs php">$generator = <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">PoemGenerator</span>(
    <span class="hljs-highlight  prop">formatter</span>: <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">EchoFormatter</span>(),
);

$generator = <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">PoemGenerator</span>(
    <span class="hljs-highlight  prop">orderer</span>: <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">RandomOrderer</span>(),
);

$generator = <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">PoemGenerator</span>(
    <span class="hljs-highlight  prop">formatter</span>: <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">EchoFormatter</span>(),
    <span class="hljs-highlight  prop">orderer</span>: <span class="hljs-keyword">new</span> <span class="hljs-highlight  type">RandomOrderer</span>(),
);</code></pre>
                <p>Không cần phải kế thừa từ class nào cả!</p>
                <hr>
                <p>Đây mới <em>đúng là</em> lập trình hướng đối tượng. Tôi đã nói với bạn rằng OOP không chỉ có mỗi kế thừa và ví dụ này đã chứng minh điều đó. Bằng cách tạo các object cha sở hữu các object con với nhiệm vụ giải quyết các vấn đề chuyên biệt, chúng ta có thể đưa ra các giải pháp linh hoạt và bền lâu, thứ có thể giúp ta giải quyết vấn đề một cách gọn gàng sạch sẽ. Đây chính thứ mà chúng ta ít khi được dạy: <b>ưu tiên sở hữu hơn kế thừa</b> (composition over inheritance) và trớ trêu thay lại là một trong những cột trụ căn bản nhất của OO.</p>
                <p>Tôi cũng nói thật: Không phải lúc nào tôi cũng áp dụng cách này khi bắt đầu viết code. Sẽ dễ dàng hơn rất nhiều khi bạn bắt đầu code một cách đơn giản và đừng nghĩ đến sở hữu hay kế thừa quá sớm. Bài học ở đây là đừng có lúc nào cũng nghĩ đến sở hữu, mà chính là hãy cố tìm ra vấn đề mà bạn cần phải xử lý, sau đó dùng công cụ thích hợp để làm điều đó.</p>
                <h2 id="what-about-traits?"><a href="#what-about-traits?" class="markup-anchor">#</a> Còn traits thì sao?</h2>
                <p>Liệu có thể dùng trait để giải quyết vấn đề này không? Chúng ta có thể tạo ra 2 trail <code><span class="hljs-highlight  type">RandomPoemTrait</span></code> và <code><span class="hljs-highlight  type">EchoPoemTrait</span></code>, trong các trait đó lại tồn tại <code><span class="hljs-highlight  prop">data</span></code> và <code><span class="hljs-highlight  prop">phrase</span></code>.
                    Thực ra thì sử dụng traits cũng không tốt hơn so với sử dụng sở hữu. Vì sao ư? Hãy đọc thêm ở <a href="https://front-line-php.com/">trong sách</a> nhé.</p>

            </div>

        </article>

    </main>

    <footer class="bg-black pt-32 pb-8">
    </footer>
</body>

</html>